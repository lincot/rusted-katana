//! <https://www.codewars.com/kata/5ba178be875de960a6000187/train/rust>

pub const fn find_lowest_int(k: u64) -> u64 {
    match k % 100 {
        5 | 21 | 26 | 42 | 47 | 63 | 68 | 84 | 89 => return 9,
        18 | 39 | 76 | 97 => return 18,
        54 | 61 | 75 | 82 => return 27,
        14 | 43 | 64 | 93 => return 36,
        9 | 29 | 49 | 69 => return 45,
        32 => return 54,
        83 | 86 => return 63,
        _ => {}
    }
    let mut n = 27;
    loop {
        if digits_hash(n * k) == digits_hash(n * k + n) {
            return n;
        }
        n += 9;
    }
}

const fn digits_hash(mut n: u64) -> u64 {
    #[allow(clippy::unreadable_literal)]
    const ENCODED_DIGITS_100: [u64; 100] = [
        2,
        22,
        442,
        9262,
        194482,
        4084102,
        85766122,
        1801088542,
        37822859362,
        794280046582,
        22,
        42,
        462,
        9282,
        194502,
        4084122,
        85766142,
        1801088562,
        37822859382,
        794280046602,
        442,
        462,
        882,
        9702,
        194922,
        4084542,
        85766562,
        1801088982,
        37822859802,
        794280047022,
        9262,
        9282,
        9702,
        18522,
        203742,
        4093362,
        85775382,
        1801097802,
        37822868622,
        794280055842,
        194482,
        194502,
        194922,
        203742,
        388962,
        4278582,
        85960602,
        1801283022,
        37823053842,
        794280241062,
        4084102,
        4084122,
        4084542,
        4093362,
        4278582,
        8168202,
        89850222,
        1805172642,
        37826943462,
        794284130682,
        85766122,
        85766142,
        85766562,
        85775382,
        85960602,
        89850222,
        171532242,
        1886854662,
        37908625482,
        794365812702,
        1801088542,
        1801088562,
        1801088982,
        1801097802,
        1801283022,
        1805172642,
        1886854662,
        3602177082,
        39623947902,
        796081135122,
        37822859362,
        37822859382,
        37822859802,
        37822868622,
        37823053842,
        37826943462,
        37908625482,
        39623947902,
        75645718722,
        832102905942,
        794280046582,
        794280046602,
        794280047022,
        794280055842,
        794280241062,
        794284130682,
        794365812702,
        796081135122,
        832102905942,
        1588560093162,
    ];

    let mut res = 0;
    while n >= 10 {
        res += ENCODED_DIGITS_100[(n % 100) as usize];
        n /= 100;
    }
    if n != 0 {
        res += ENCODED_DIGITS_100[n as usize];
    }
    res
}
